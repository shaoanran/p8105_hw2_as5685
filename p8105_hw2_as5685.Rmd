---
title: "P8105_hw2_as5685"
output: github_document
editor_options: 
  chunk_output_type: inline
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
```
# problem 1
## import datasets 
```{r}
waterwheel_data =
  read_excel(path = "~/Desktop/Data Science/p8105_hw2_as5685/Trash-wheel-collection-totals-8-6-19.xlsx","Mr. Trash Wheel", range = ("A2:N408")) %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  )
```


##clean precipitation data for 2017 and 2018
```{r}
precipitation2017_data =
  read_excel(path = "~/Desktop/Data Science/p8105_hw2_as5685/Trash-wheel-collection-totals-8-6-19.xlsx","2017 Precipitation", range = "A2:B14") %>%
    janitor::clean_names() %>%
    drop_na() %>% 
    mutate(year = "2017")
    
precipitation2018_data =
  read_excel(path = "~/Desktop/Data Science/p8105_hw2_as5685/Trash-wheel-collection-totals-8-6-19.xlsx","2018 Precipitation", range = "A2:B14") %>% 
    janitor::clean_names() %>%
    drop_na() %>% 
    mutate(year = "2018")


PrecipitationsCombined_data =
bind_rows(precipitation2017_data, precipitation2018_data) %>% 
  mutate(
    month = month.name[month]
  )
```
Interpretation about the data: 
The total precipitation in 2018 is `r sum(pull(precipitation2018_data,total))`.
The median number of sports balls in a dumpster in 2017 is `r median(pull(precipitation2017_data,total))`. 
The number of observation in waterwheel_data is `r nrow(waterwheel_data)`.
The number of observation in merged data for 2017/2018 precipitation is `r nrow(PrecipitationsCombined_data)`.


# problem2
## read in Fivethirtyeight
```{r}
pols_month_data = read_csv("./fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(mon,into = c("year","month", "day"),sep = "-") %>% 
  pivot_longer(
    cols = starts_with("prez"),
    names_to = "prezsident", 
    names_prefix = "prez_",
    values_to = "value"
  ) %>% 
filter(value != "0") %>% 
select(-day)

snp_data = read_csv("./fivethirtyeight_datasets/snp.csv") %>% 
  janitor::clean_names() %>% 
  separate(date,into = c("month","day", "year"),sep = "/") %>% 
  select(year, month, -day, close)


unemployment_data = read_csv("./fivethirtyeight_datasets/unemployment.csv") %>% 
  janitor::clean_names() %>% 
  mutate(
    year = as.character(year) 
  ) %>% 
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "rate"
    )
```

## merge 2017,2018 and unemployment  
```{r}
merged_data =
  left_join(pols_month_data,snp_data,by = c("year","month"))
merged_three_data = 
  left_join(merged_data, unemployment_data, by = c("year","month"))
```

# problem 3
## load and tidy NYC Open data 
```{r}
baby_names_data = read_csv("./Popular_Baby_Names.csv") %>% 
  janitor::clean_names() %>% 
  mutate(
    gender = str_to_lower(gender),
    ethnicity = str_to_lower(ethnicity),
    childs_first_name = str_to_lower(childs_first_name)
  ) %>% 
  distinct()

```


 
 
 






